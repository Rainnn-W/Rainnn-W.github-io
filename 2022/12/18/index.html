<!DOCTYPE html><html lang="CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="Rainnn-W"><meta name="copyright" content="Rainnn-W"><meta name="generator" content="Hexo 6.3.0"><meta name="theme" content="hexo-theme-yun"><title>Linux | Rainnnの</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"rainnn-w.github.io","root":"/","title":["Rainnn","の","博","客"],"version":"1.10.9","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"検索...","empty":"${query} が見つかりませんでした.","hits":"${hits} 件見つかりました","hits_time":"${hits} 件見つかりました, ${time} ミリ秒"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194","176, 224, 230","175, 238, 238","212, 242, 231","230, 230, 250","123, 104, 238"]},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><meta name="description" content="一、Linux基础1.简介 Linux是多用户、多任务、抢占式操作系统，原著者Linus，是开源操作系统  基本组成：Kernel内核、Shell命令行、System Applications  用户输入命令—–shell翻译—–kernel   Linux Kernel  Linux操作系统的核心程序 管理程序的运行，为程序分配资源，并且处理程序之间的通信。 管理对文件系统的读写，把对文件系统的">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux">
<meta property="og:url" content="https://rainnn-w.github.io/2022/12/18/index.html">
<meta property="og:site_name" content="Rainnnの">
<meta property="og:description" content="一、Linux基础1.简介 Linux是多用户、多任务、抢占式操作系统，原著者Linus，是开源操作系统  基本组成：Kernel内核、Shell命令行、System Applications  用户输入命令—–shell翻译—–kernel   Linux Kernel  Linux操作系统的核心程序 管理程序的运行，为程序分配资源，并且处理程序之间的通信。 管理对文件系统的读写，把对文件系统的">
<meta property="og:locale">
<meta property="og:image" content="https://rainnn-w.github.io/2022/12/18/Linux/2.png">
<meta property="og:image" content="https://rainnn-w.github.io/2022/12/18/Linux/3.png">
<meta property="og:image" content="https://rainnn-w.github.io/2022/12/18/Linux/4.png">
<meta property="og:image" content="https://rainnn-w.github.io/2022/12/18/Linux/5.jpg">
<meta property="og:image" content="https://rainnn-w.github.io/2022/12/18/Linux/1.png">
<meta property="og:image" content="https://rainnn-w.github.io/2022/12/18/Linux/Files/Study/Linux/Linux/6.png">
<meta property="article:published_time" content="2022-12-18T05:42:41.000Z">
<meta property="article:modified_time" content="2023-02-27T06:02:40.316Z">
<meta property="article:author" content="Rainnn-W">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://rainnn-w.github.io/2022/12/18/Linux/2.png"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="見出し"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="概要"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Rainnn-W"><img width="96" loading="lazy" src="/yun.png" alt="Rainnn-W"></a><div class="site-author-name"><a href="/about/">Rainnn-W</a></div><span class="site-name">Rainnnの</span><sub class="site-subtitle">Individual blog</sub><div class="site-description">blingbling~</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="ホーム"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="アーカイブ"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">8</span></a></div><div class="site-state-item"><a href="/categories/" title="カテゴリ"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">0</span></a></div><div class="site-state-item"><a href="/tags/" title="タグ"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">5</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:settings-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/rainnn-w" title="GitHub" target="_blank" style="color:#181717"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="504537585@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/180529848" title="哔哩哔哩动画" target="_blank" style="color:#FF8EB3"><span class="icon iconify" data-icon="ri:bilibili-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81Linux%E5%9F%BA%E7%A1%80"><span class="toc-text">一、Linux基础</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="toc-text">1.简介</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-text">2.基本命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-text">3.知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-text">二、文件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%96%87%E4%BB%B6%E5%90%8D"><span class="toc-text">1.文件名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.文件类型</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%99%AE%E9%80%9A%E6%96%87%E4%BB%B6%EF%BC%88regular-file%EF%BC%89"><span class="toc-text">（1）普通文件（regular file）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%EF%BC%88directory%EF%BC%89-%E5%8C%85%E5%90%AB%E6%96%87%E4%BB%B6%E7%9A%84%E5%AE%B9%E5%99%A8%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%AD%98%E6%94%BE%E7%9B%AE%E5%BD%95%E4%B8%AD%E6%96%87%E4%BB%B6%E5%88%97%E8%A1%A8%E4%BF%A1%E6%81%AF"><span class="toc-text">（2）目录文件（directory） 包含文件的容器，用于存放目录中文件列表信息</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E8%AE%BE%E5%A4%87%E6%96%87%E4%BB%B6%EF%BC%88device-file%EF%BC%89-%E5%9C%A8linux%E4%B8%AD%EF%BC%8C%E8%AE%BE%E5%A4%87%E8%A2%AB%E5%BD%93%E4%BD%9C%E6%96%87%E4%BB%B6%E6%9D%A5%E5%A4%84%E7%90%86"><span class="toc-text">（3）设备文件（device file） 在linux中，设备被当作文件来处理</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E7%9B%AE%E5%BD%95%E7%BB%84%E7%BB%87"><span class="toc-text">3.目录组织</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E2%80%BB%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4"><span class="toc-text">4.※操作命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">5.基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%9B%AE%E5%BD%95"><span class="toc-text">（1）目录</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E9%93%BE%E6%8E%A5"><span class="toc-text">（2）链接</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-text">6.权限控制</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E7%94%A8%E6%88%B7%E7%B1%BB%E5%88%AB"><span class="toc-text">(1)用户类别</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E4%B8%89%E7%A7%8D%E6%9D%83%E9%99%90"><span class="toc-text">（2）三种权限</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%9D%83%E9%99%90%E5%88%A4%E6%96%AD"><span class="toc-text">（3）权限判断</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E6%9D%83%E9%99%90%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4"><span class="toc-text">（4）权限操作命令</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-text">7.进程管理</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%A6%82%E5%BF%B5"><span class="toc-text">（1）概念</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89Init%E8%BF%9B%E7%A8%8B"><span class="toc-text">（2）Init进程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4"><span class="toc-text">（3）操作命令</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81vi%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-text">三、vi编辑器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F-Command-mode"><span class="toc-text">1.命令模式(Command mode)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E8%BF%9B%E5%85%A5%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="toc-text">（1）进入命令模式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%A7%BB%E5%8A%A8%E5%85%89%E6%A0%87"><span class="toc-text">（2）移动光标</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%90%9C%E7%B4%A2"><span class="toc-text">（3）字符串搜索</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E8%BE%93%E5%85%A5%E6%A8%A1%E5%BC%8F-Insert-mode"><span class="toc-text">2.输入模式(Insert mode)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E8%BF%9B%E5%85%A5%E8%BE%93%E5%85%A5%E6%A8%A1%E5%BC%8F"><span class="toc-text">（1）进入输入模式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E8%BE%93%E5%85%A5%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%91%BD%E4%BB%A4"><span class="toc-text">(2)输入模式下命令</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%BA%95%E8%A1%8C%E6%A8%A1%E5%BC%8F-Last-Line-Mode"><span class="toc-text">3.底行模式(Last Line Mode)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E8%BF%9B%E5%85%A5%E5%BA%95%E8%A1%8C%E6%A8%A1%E5%BC%8F"><span class="toc-text">（1）进入底行模式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%A7%BB%E5%8A%A8%E5%85%89%E6%A0%87-1"><span class="toc-text">（2）移动光标</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9B%BF%E6%8D%A2"><span class="toc-text">（3）字符串替换</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%884%EF%BC%89-%E4%BF%9D%E5%AD%98"><span class="toc-text">（4） 保存</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E9%80%80%E5%87%BA"><span class="toc-text">（5）退出</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-%E5%9C%A8vi%E5%86%85%E4%BD%BF%E7%94%A8Shell"><span class="toc-text">(6)在vi内使用Shell</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-Vim%E5%92%8Cgvim"><span class="toc-text">4.Vim和gvim</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81shell"><span class="toc-text">四、shell</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E4%B8%80%EF%BC%89shell%E5%9F%BA%E7%A1%80"><span class="toc-text">（一）shell基础</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%90%AF%E5%8A%A8%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E5%AD%90shell"><span class="toc-text">1.启动指定类型子shell</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%80%80%E5%87%BA%E5%AD%90shell"><span class="toc-text">2.退出子shell</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E9%BB%98%E8%AE%A4shell"><span class="toc-text">3.查看当前系统默认shell</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%8F%98%E9%87%8F"><span class="toc-text">4.变量</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E8%B5%8B%E5%80%BC"><span class="toc-text">（1）赋值</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E6%98%BE%E7%A4%BA%E5%8F%98%E9%87%8F"><span class="toc-text">（2）显示变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89Shell%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">（3）显示所有Shell环境变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-%E6%B8%85%E9%99%A4%E5%8F%98%E9%87%8F"><span class="toc-text">(4)清除变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-%E4%BB%8E%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%AF%BB%E5%85%A5%E5%8F%98%E9%87%8F%E5%80%BCread"><span class="toc-text">(5)从标准输入读入变量值read</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-%E5%85%A8%E5%B1%80%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">(6)全局环境变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%887%EF%BC%89%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="toc-text">（7）特殊字符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%888%EF%BC%89%E8%BF%9B%E7%A8%8B%E9%97%B4%E5%8F%98%E9%87%8F%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">（8）进程间变量的关系</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-profile"><span class="toc-text">(9) profile</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E6%B3%A8%E9%87%8A"><span class="toc-text">5.注释</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E4%BA%8C%EF%BC%89shell%E8%BF%9B%E9%98%B6"><span class="toc-text">（二）shell进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-text">1.通配符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%A0%87%E5%87%86%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-text">2.标准文件和文件描述符</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-text">（1）文件描述符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">（2）输入输出重定向</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E9%87%8D%E5%AE%9A%E5%90%91%E7%9A%84%E7%BB%93%E5%90%88%E5%BA%94%E7%94%A8"><span class="toc-text">(3)重定向的结合应用</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E7%AE%A1%E9%81%93"><span class="toc-text">3.管道</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E8%BF%87%E6%BB%A4%E5%92%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">4.过滤和正则表达式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-grep%E5%91%BD%E4%BB%A4"><span class="toc-text">5.grep命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-find%E5%91%BD%E4%BB%A4"><span class="toc-text">6.find命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-sort-%E5%91%BD%E4%BB%A4"><span class="toc-text">7.sort 命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-%E5%91%BD%E4%BB%A4%E7%BB%84-%E5%91%BD%E4%BB%A4%E6%8D%A2%E8%A1%8C"><span class="toc-text">8. 命令组 命令换行</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-amp-amp-%E5%92%8C"><span class="toc-text">9.&amp;&amp;和||</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-%E7%AE%97%E6%9C%AF"><span class="toc-text">10.算术</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89shell%E7%9A%84%E7%AE%97%E6%95%B0%E6%89%A9%E5%B1%95"><span class="toc-text">（1）shell的算数扩展</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89expr%E5%91%BD%E4%BB%A4"><span class="toc-text">（2）expr命令</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-test%E5%91%BD%E4%BB%A4"><span class="toc-text">11.test命令</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%A0%BC%E5%BC%8F"><span class="toc-text">（1）格式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E8%BE%93%E5%87%BA"><span class="toc-text">（2）输出</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">（3）操作符</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E4%B8%89%EF%BC%89shell%E8%84%9A%E6%9C%AC"><span class="toc-text">（三）shell脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%BC%96%E5%86%99%E6%96%B9%E6%B3%95"><span class="toc-text">1.编写方法</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6"><span class="toc-text">（1）创建文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%BC%96%E8%BE%91%E5%86%85%E5%AE%B9"><span class="toc-text">（2）编辑内容</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E8%BF%90%E8%A1%8Cshell%E8%84%9A%E6%9C%AC"><span class="toc-text">（3）运行shell脚本</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-text">2.流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89IF"><span class="toc-text">（1）IF</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89case"><span class="toc-text">（2）case</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89for"><span class="toc-text">（3）for</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%884%EF%BC%89while"><span class="toc-text">（4）while</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%885%EF%BC%89until"><span class="toc-text">（5）until</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%89%A7%E8%A1%8C%E6%97%B6%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="toc-text">3.执行时传递参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E8%AF%BB%E5%85%A5%E5%8F%82%E6%95%B0"><span class="toc-text">4.读入参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-sleep"><span class="toc-text">5.sleep</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BE%8B%E9%A2%98"><span class="toc-text">五、例题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E4%B8%80%EF%BC%89shell%E7%BC%96%E7%A8%8B"><span class="toc-text">（一）shell编程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%AE%A1%E7%AE%97%E4%B8%A4%E4%B8%AA%E6%AD%A3%E6%95%B4%E6%95%B0%E7%9A%84%E6%9C%80%E5%A4%A7%E5%85%AC%E7%BA%A6%E6%95%B0"><span class="toc-text">1.计算两个正整数的最大公约数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%BB%99%E5%87%BA%E8%BE%93%E5%85%A5%E7%9A%84%E4%B8%80%E7%B3%BB%E5%88%97%E6%95%B4%E6%95%B0%EF%BC%88%E8%BE%93%E5%85%A50%E5%81%9C%E6%AD%A2%E8%BE%93%E5%85%A5%EF%BC%89%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B0%E3%80%81%E7%AC%AC%E4%BA%8C%E6%9C%80%E5%A4%A7%E6%95%B0"><span class="toc-text">2.给出输入的一系列整数（输入0停止输入）的最大数、第二最大数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%86%99%E4%B8%80%E4%B8%AAshell%E8%84%9A%E6%9C%AC%EF%BC%8C%E6%AF%8F%E9%9A%9410%E7%A7%92%EF%BC%8C%E6%A3%80%E6%9F%A5%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%9C%89%E6%B2%A1%E6%9C%89%E8%BF%9B%E7%A8%8B%E5%90%8D%E5%AD%97%E4%B8%BA%E2%80%9Cfirefox%E2%80%9D%E7%9A%84%E8%BF%9B%E7%A8%8B%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%89%E7%9A%84%E8%AF%9D%E6%98%BE%E7%A4%BA%E2%80%9Cfirefox-%E8%BF%9B%E7%A8%8B%E5%87%BA%E7%8E%B0%E4%BA%86%EF%BC%81%E2%80%9D%E5%B9%B6%E9%80%80%E5%87%BA%EF%BC%8C%E8%BF%94%E5%9B%9E%E7%A0%81%E8%AE%BE%E7%BD%AE%E4%B8%BA%E7%AD%89%E5%BE%85%E7%9A%84%E7%A7%92%E6%95%B0%E3%80%82"><span class="toc-text">3.写一个shell脚本，每隔10秒，检查当前系统中有没有进程名字为“firefox”的进程，如果有的话显示“firefox 进程出现了！”并退出，返回码设置为等待的秒数。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%86%99%E4%B8%80%E4%B8%AA%E8%84%9A%E6%9C%AC%EF%BC%8C%E6%8C%81%E7%BB%AD%E7%9B%91%E8%A7%86%E7%94%A8%E6%88%B7stu%E6%98%AF%E5%90%A6%E7%99%BB%E5%BD%95%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%99%BB%E5%BD%95%E4%BA%86%EF%BC%8C%E5%B0%B1%E6%AF%8F%E9%9A%941%E5%88%86%E9%92%9F%E6%8A%8A%E4%BD%A0%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8CQQ%E5%8F%B7%E7%A0%81%E5%8F%91%E7%BB%99%E4%BB%96%EF%BC%8C%E9%87%8D%E5%A4%8D%E5%8F%91%E9%80%813%E6%AC%A1%E4%B8%BA%E6%AD%A2%E3%80%82"><span class="toc-text">4.写一个脚本，持续监视用户stu是否登录，如果登录了，就每隔1分钟把你的用户名和QQ号码发给他，重复发送3次为止。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5"><span class="toc-text">5.</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://rainnn-w.github.io/2022/12/18/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Rainnn-W"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Rainnnの"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Linux</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="作成日：2022-12-18 13:42:41" itemprop="dateCreated datePublished" datetime="2022-12-18T13:42:41+08:00">2022-12-18</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="修正日：2023-02-27 14:02:40" itemprop="dateModified" datetime="2023-02-27T14:02:40+08:00">2023-02-27</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="単語数"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="単語数">11k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="読書の時間"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="読書の時間">42m</span></span></span><div class="post-classify"><span class="post-tag"><a class="tag-item" href="/tags/Linux/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">Linux</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h3 id="一、Linux基础"><a href="#一、Linux基础" class="headerlink" title="一、Linux基础"></a>一、Linux基础</h3><h5 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h5><ul>
<li><p>Linux是多用户、多任务、抢占式操作系统，原著者Linus，是开源操作系统</p>
</li>
<li><p>基本组成：Kernel内核、Shell命令行、System Applications</p>
<blockquote>
<p>用户输入命令—–shell翻译—–kernel</p>
</blockquote>
<ul>
<li>Linux Kernel  Linux操作系统的核心程序<ul>
<li>管理程序的运行，为程序分配资源，并且处理程序之间的通信。</li>
<li>管理对文件系统的读写，把对文件系统的操作映射成对磁盘或其它块设备的操作。</li>
<li>管理存储器，为程序分配内存，并且管理虚拟内存。</li>
<li>管理输入、输出，将设备映射成设备文件。</li>
<li>管理网络。</li>
</ul>
</li>
<li>Linux Shell  <ul>
<li>是一个命令解释器，是内核和用户之间的接口。</li>
<li>是一个编程语言。(Shell script)</li>
</ul>
</li>
</ul>
<blockquote>
<p>系统的启动过程: </p>
<p> init -&gt; login -&gt; passwd -&gt; shell</p>
</blockquote>
<ul>
<li>Linux应用程序<ul>
<li>标准的Linux系统都具有一整套称为应用程序的程序集，包括文本编辑器、Xwindow、办公套件、Internet工具和数据库等。</li>
</ul>
</li>
</ul>
</li>
<li><p>shell提供内核的保护层</p>
<ul>
<li>对用户屏蔽内核的复杂性</li>
<li>保护内核以免用户操作造成伤害</li>
</ul>
</li>
<li><p>系统各层次关系：</p>
<ul>
<li>硬件是实体工作者</li>
<li>内核能够控制硬件工作</li>
<li>shell是用户与内核沟通的桥梁，是中间站</li>
</ul>
<h1 id><a href="#" class="headerlink" title></a><img src="/2022/12/18/Linux/2.png" loading="lazy"></h1></li>
</ul>
<h5 id="2-基本命令"><a href="#2-基本命令" class="headerlink" title="2.基本命令"></a>2.基本命令</h5><p><strong>Linux命令是大小写敏感的，不同于Windows</strong></p>
<ul>
<li><p>登录 退出</p>
</li>
<li><p>exit退出命令窗口</p>
</li>
<li><p><Ctrl-d> 中断当前的通信或从文件中退出。</Ctrl-d></p>
</li>
<li><p><Ctrl-c> 中断当前的命令并返回Shell</Ctrl-c></p>
</li>
<li><p>date 查看当前日期和时间</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Web Feb <span class="token number">15</span> <span class="token number">18</span>:45:46 PST <span class="token number">2023</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>CST：China Standard Time 中国标准时间   </p>
<p>PST ：Pitcairn Standard Time 太平洋标准时间</p>
</li>
<li><p>date -s设置日期&#x2F;时间</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">date</span> <span class="token parameter variable">-s</span> <span class="token number">20041129</span>
<span class="token function">date</span> <span class="token parameter variable">-s</span> <span class="token number">12</span>:23:23
<span class="token function">date</span> <span class="token parameter variable">-s</span> <span class="token string">"2004-11-29 12:23:23"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>cal 查看日历（默认当前年份 月份的月历）</p>
<ul>
<li>cal 年份 查看当年12个月日历 </li>
<li>cal 月份 年份 查看该年该月日历</li>
</ul>
</li>
<li><p>cal 仅显示当前月份日历</p>
</li>
</ul>
<blockquote>
<p>若只有一个数字，则被认为是年,并显示相应年的12个月的日历。</p>
</blockquote>
<ul>
<li><p>clear 清屏</p>
</li>
<li><p>echo 在标准输出上显示字符串  <code>\</code>换行符</p>
</li>
<li><p>who 查看当前用户及登陆时间</p>
</li>
<li><p>whoami 查看当前用户</p>
</li>
<li><p>ping 检测主机。使用 ICMP 传输协议，发出要求回应的信息</p>
</li>
<li><p>mail </p>
<ul>
<li><code>mail &lt;username&gt; </code> 发送E-mail </li>
<li><code>mail  </code> 接收 E-mail</li>
</ul>
<blockquote>
<p>一旦邮件被打开，其将被放 $HOME&#x2F;mbox目录中，若想再看这些信息则用：</p>
<p><code>mail -f</code></p>
</blockquote>
</li>
<li><p>wall   将在系统中的所有在线用户的终端上显示信息，主要用于广播系统管理信息。</p>
</li>
<li><p>write 发送信息 <code>write &lt;username&gt;</code>   用<ctrl-d>结束对话</ctrl-d></p>
</li>
<li><p>mesg 信息接收与否的开关命令 </p>
<p><code>mesg n</code>拒绝消息  <code>mesg y</code>允许接收消息</p>
</li>
<li><p>man+命令 查看具体命令的说明 （press q to quit）</p>
</li>
</ul>
<blockquote>
<p>超级用户root，Shell默认提示符：#</p>
</blockquote>
<blockquote>
<p>普通用户，Shell默认提示符：$</p>
</blockquote>
<pre class="line-numbers language-none"><code class="language-none">#useradd rainnn  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>添加用户rainnn</p>
<pre class="line-numbers language-none"><code class="language-none">#deluser rainnn <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>删除用户rainnn</p>
<h5 id="3-知识点"><a href="#3-知识点" class="headerlink" title="3.知识点"></a>3.知识点</h5><p>(1) <code>&gt;</code> 表示覆盖原文件内容（文件的日期也会自动更新） </p>
<p><code>&gt;&gt;   </code> 表示追加内容（会另起一行，文件的日期也会自动更新）</p>
<p>(2) tty 终端机代号</p>
<p>(3)常见目录说明</p>
<ul>
<li><p>&#x2F;bin 存放二进制可执行文件(ls,cat,mkdir 等)，常用命令一般都在这里。</p>
</li>
<li><p>&#x2F;etc 存放系统管理和配置文件 </p>
<p>&#x2F;etc&#x2F;shadow 存放用户口令的加密信息 </p>
</li>
<li><p>&#x2F;home 存放所有用户文件的根目录，是用户主目录的基点。 </p>
<p>比如用户 user 的主目录就是&#x2F;home&#x2F;user，可以用~user 表示。 </p>
</li>
<li><p>&#x2F;usr 用于存放系统应用程序，比较重要的目录&#x2F;usr&#x2F;local 本地系统管理员 软件安装目录（安装系统级的应用）。这是最庞大的目录，要用到的应用 程序和文件几乎都在这个目录。 </p>
<p>&#x2F;usr&#x2F;x11r6 存放 x window 的目录 </p>
<p>&#x2F;usr&#x2F;bin 众多的应用程序  </p>
<p>&#x2F;usr&#x2F;sbin 超级用户的一些管理程序 </p>
<p>&#x2F;usr&#x2F;doc linux 文档  </p>
<p>&#x2F;usr&#x2F;include linux 下开发和编译应用程序所需要的头文件 </p>
<p>&#x2F;usr&#x2F;lib 常用的动态链接库和软件包的配置文件  </p>
<p>&#x2F;usr&#x2F;man 帮助文档  </p>
<p>&#x2F;usr&#x2F;src 源代码,linux 内核的源代码就放在&#x2F;usr&#x2F;src&#x2F;linux </p>
<p>&#x2F;usr&#x2F;local&#x2F;bin 本地增加的命令  </p>
<p>&#x2F;usr&#x2F;local&#x2F;lib 本地增加的库</p>
</li>
<li><p>&#x2F;dev 存放设备文件 </p>
</li>
<li><p>&#x2F;mnt 系统管理员安装临时文件的安装点。 </p>
<p>系统提供这个目录是让用户临时挂载其他的文件系统。 </p>
</li>
<li><p>&#x2F;tmp 存放各种临时文件，是公用的临时文件存储点。 </p>
</li>
<li><p>&#x2F;var 存放运行时需要改变数据的文件，也是某些大文件的溢出区， 比方说各种服务的日志文件（系统启动日志等。）等。 </p>
</li>
<li><p>&#x2F;opt 额外安装的可选应用程序包所放置的位置。 </p>
<p>一般情况下，我们可以把 tomcat 等都安装到这里。 </p>
</li>
<li><p>&#x2F;boot 存放用于系统引导时使用的各种文件 </p>
</li>
<li><p>&#x2F;proc 虚拟文件系统目录，是系统内存的映射。 </p>
<p>可直接访问这个目录来获取系统信息。</p>
</li>
<li><p>&#x2F;root 超级用户的目录</p>
</li>
</ul>
<h3 id="二、文件系统"><a href="#二、文件系统" class="headerlink" title="二、文件系统"></a>二、文件系统</h3><blockquote>
<p>文件系统：文件系统实现数据存储的物理（介质）独立性</p>
<p>文件：是Linux用来存储信息的基本结构，它是被命名（称为文件名）的、存储在某种媒介（如磁盘、光盘和磁带等）上的一组信息的集合。</p>
</blockquote>
<h5 id="1-文件名"><a href="#1-文件名" class="headerlink" title="1.文件名"></a>1.文件名</h5><p>（1）文件名通常由字母、数字、“.”（点号）、“_”（下划线）或“-”（减号）组成，文件名中不能含有“&#x2F;”符号。</p>
<p>（2）隐藏文件一般是以“**.**”符号开头</p>
<p>（3）在文件名中的空格或制表符，在引用文件时必须用引号将其括起来；</p>
<p>（4）大小写敏感</p>
<p>（5）避免使用具有特别意义的字符： ?,*,@, #,$,&amp;,(,),,|,;,‘,“,&#96;,&lt;,&gt;,[,]等</p>
<p>（6）避免使用 ‘+’和‘-‘符号作为文件名的第一个字符</p>
<h5 id="2-文件类型"><a href="#2-文件类型" class="headerlink" title="2.文件类型"></a>2.文件类型</h5><h6 id="（1）普通文件（regular-file）"><a href="#（1）普通文件（regular-file）" class="headerlink" title="（1）普通文件（regular file）"></a>（1）普通文件（regular file）</h6><ul>
<li><p>二进制文件</p>
</li>
<li><p>文本文件</p>
</li>
</ul>
<h6 id="（2）目录文件（directory）-包含文件的容器，用于存放目录中文件列表信息"><a href="#（2）目录文件（directory）-包含文件的容器，用于存放目录中文件列表信息" class="headerlink" title="（2）目录文件（directory） 包含文件的容器，用于存放目录中文件列表信息"></a>（2）目录文件（directory） 包含文件的容器，用于存放目录中文件列表信息</h6><p>存储一组相关文件的位置、大小等与文件有关的信息，但它不包含具体的文件内容，因而和常规文件相比占用的磁盘空间很小。</p>
<p>每一项(entry) 主要表示的是一个文件名(或子目录名)以及文件的索引节点号(i-node number ) 。</p>
<p>索引节点号：指向该文件内容所在的数据块的位置，记录了该文件的属性</p>
<p>通过 i-node表与文件之间建立对应关系，目录文件是存放文件名唯一的地方，但文件名不放在 i-node表中。</p>
<h6 id="（3）设备文件（device-file）-在linux中，设备被当作文件来处理"><a href="#（3）设备文件（device-file）-在linux中，设备被当作文件来处理" class="headerlink" title="（3）设备文件（device file） 在linux中，设备被当作文件来处理"></a>（3）设备文件（device file） 在linux中，设备被当作文件来处理</h6><blockquote>
<p>Everything is a file！</p>
</blockquote>
<h5 id="3-目录组织"><a href="#3-目录组织" class="headerlink" title="3.目录组织"></a>3.目录组织</h5><ul>
<li>访问一个文件或子目录时，首先访问他所在的目录，找到该文件的i-node值，然后再查找i-node表找出相应的i-node项，从而找到了相应的数据。</li>
</ul>
<p><img src="/2022/12/18/Linux/3.png" loading="lazy"></p>
<h5 id="4-※操作命令"><a href="#4-※操作命令" class="headerlink" title="4.※操作命令"></a><u>4.※操作命令</u></h5><ul>
<li><p>touch 创建文件</p>
</li>
<li><p>cp 复制  <code>cp [-options] 源文件或目录  目的文件或目录</code> </p>
<ul>
<li>-i：在覆盖文件之前提示用户，由用户确认.</li>
<li>-R或-r：递归复制目录，即复制相应的目录及其所有子目录</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$cp</span> file1 file2
<span class="token comment">#在当前目录下拷贝文件file1的副本file2，但若file2已存在，将覆盖file2的原有内容</span>
<span class="token variable">$cp</span> file1 directory1
<span class="token comment">#将文件file1拷贝到当前目录下的directory1目录下(相对路径)</span>
<span class="token variable">$cp</span> preface doc props 
<span class="token comment">#将文件preface和doc拷贝到props目录中</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#要将文件 myfile1 拷贝到 myfile1.bak </span>
$ <span class="token function">cp</span> myfile1 myfile1.bak
<span class="token comment">#要将文件 get.prd 从 /usr/local/sybin目录拷贝到到/usr/local/bin目录</span>
<span class="token variable">$cp</span> /usr/local/sybin/get.prd   /usr/local/bin
<span class="token comment">#要将/logs目录下的所有文件及子目录拷贝到/hold/logs目录中</span>
$ <span class="token function">cp</span>  <span class="token parameter variable">-r</span> /logs  /hold/logs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>mv 移动或改名 </p>
<p>  <code>mv 原文件名 新文件名</code> （改名）   <code>mv 文件名 路径名</code> （移动） <code>mv 文件名 路径/新文件名</code> （移动并改名）</p>
<ul>
<li>-f 强制执行。直接覆盖已存在的目的文件，不显示覆盖前的询问讯息。</li>
<li>-i 交互执行。当已存在同名的目标文件名时，在覆盖之前给出提示，由用户确认后才予以覆盖。</li>
</ul>
</li>
<li><p>rm 删除文件 </p>
<p><code>rm file1 file2 </code>（删除多个文件用空格隔开文件名） <code>rm directory</code> （删除目录）</p>
<ul>
<li>-f 强制执行</li>
<li>-i 交互执行，在执行删除前提示确认</li>
<li>-R或-r 递归的删除目录</li>
</ul>
</li>
<li><p>mkdir 创建目录（对其父目录必须有写权限）</p>
<ul>
<li><p>-p 递归创建，即使路径上的文件夹本来不存在</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$mkdir</span> <span class="token parameter variable">-p</span> test1/test2/test3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>-m 指定权限</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$mkdir</span> <span class="token parameter variable">-m</span> <span class="token number">711</span> testqq
<span class="token comment">#drwx--x--x 2 test test 4096 Feb 6 20:48 testqq/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ul>
</li>
<li><p>rmdir 删除目录 （对该目录的父目录必须有写权限，且该目录为空目录）</p>
</li>
<li><p>whereis 显示文件目录 </p>
<blockquote>
<p>whereis 找不到某个文件的部分原因可能是这个文件没有存在于任何 whereis 命令搜索的子目录中。whereis 命令检索的子目录是固定编写 在它的程序中的。</p>
</blockquote>
</li>
<li><p>locate 与 find -name 相同</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#查找 passwd 文件</span>
<span class="token variable">$locate</span> <span class="token function">passwd</span>
<span class="token comment">#搜索 etc 目录下所有以 sh 开头的文件</span>
<span class="token variable">$locate</span> /etc/sh
<span class="token comment">#忽略大小写搜索当前用户目录下所有以 r 开头的文件 ：</span>
<span class="token variable">$locate</span> <span class="token parameter variable">-i</span> ~/r<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>mount 挂接文件系统</p>
<blockquote>
<p>Linux 通过挂接（mount）一个文件系统将该新文件系统加入它的文件系统树中。所有的文件系统, 不管是什么类型，都挂接在文件系统树的一个目录上并且该文件系统之上的文件将掩盖掉这个挂接目录中原来存在的内容。这个目录称为挂接目录或挂接点。当文件系统被卸掉之后，挂接目录中原来的文件才再次可见。 </p>
</blockquote>
</li>
<li><p>ls</p>
<ul>
<li><p>ls -a 显示全部文件（包括文件名以“.”开头的隐藏文件）</p>
</li>
<li><p>ls 显示文件</p>
</li>
<li><p>ls -l 显示长目录（文件的详细信息：文件的类型、操作权限、链接数、属主名、属组名、字节数、最近修改时间、文件名）</p>
<blockquote>
<p>每行的第一个字符表明文件的类型： </p>
<ul>
<li><p>d 目录 </p>
</li>
<li><p>f 普通文件 </p>
</li>
<li><p>l 符号链接文件 </p>
</li>
<li><p>b 块设备文件 </p>
</li>
<li><p>c 字符设备文件</p>
</li>
</ul>
</blockquote>
</li>
<li><p>ls -d 显示目录名而不显示其中的文件。</p>
</li>
<li><p>ls -R 递归列出子目录（显示文件+目录下文件）</p>
</li>
<li><p>ls -r 以逆序显示文件名列表</p>
</li>
<li><p>ls -x 显示时以字母顺序</p>
<p>(注：正常的显示顺序为按ASCII排序方式。)</p>
</li>
<li><p>ls -color 用不同颜色区分文件类型</p>
</li>
</ul>
<blockquote>
<p>颜色含义为: </p>
<p>绿色—&gt;可执行文件 </p>
<p>蓝色—&gt;目录 </p>
<p>红色—&gt;压缩文件 </p>
<p>浅蓝色-&gt;连结文件 </p>
<p>灰色—&gt;一般文件(没有定义的文件) </p>
<p>（颜色自定义可修改<code>/etc/DIR_COLORS</code>）</p>
</blockquote>
</li>
<li><p>cd 切换路径</p>
</li>
<li><p>cat 将文件的文本内容一次全部显示在屏幕上</p>
<ul>
<li><code>cat -n filename</code> 打印行号</li>
<li><code>cat -b filename</code> 打印行号，空行不编号</li>
<li><code>cat filename </code>打印文本内容（不包括行号）</li>
<li>文件的合并、建立、覆盖和添加内容等<ul>
<li><code>cat file1 file2 &gt;file</code> 将file1和file2合并到file</li>
<li><code>cat file1 &gt;&gt;file2</code> 将file1追加到file2的末尾</li>
</ul>
</li>
</ul>
</li>
<li><p>more  分屏显示文件内容。</p>
<p>你可以随心所欲地在文本上上下移动。</p>
<p>当more命令调用一个文件时,显示第一屏的文本。常用按键：</p>
<ul>
<li><p>f键或<Space>: 进入下一页。</Space></p>
</li>
<li><p>b键: 前一页</p>
</li>
<li><p><Enter>: 向下移动一行</Enter></p>
</li>
<li><p>q键或&lt;Ctrl+C&gt;:退出。</p>
</li>
</ul>
</li>
<li><p>less</p>
<p>less 工具也是对文件或其它输出进行分页显示的工具，应该说是 linux 正 统查看文件内容的工具，功能极其强大。less 的用法比起 more 更加的有弹 性。 在 more 的时候，我们并没有办法向前面翻， 只能往后面看，但若使 用了 less 时，就可以使用 [pageup] [pagedown] 等按 键的功能来往前 往后翻看文件，更容易用来查看一个文件的内容！除此之外，在 less 里头 可以拥有更多的搜索功能，不止可以向下搜，也可以向上搜。</p>
</li>
<li><p>wc  统计文件中的字符数、单词数和行数   按以下顺序输出：</p>
<p>行数  单词数  字符数  文件名</p>
<p><code>wc [ -options] [ filename ]</code></p>
<p>-c：显示字符数。</p>
<p>-l：显示行数。</p>
<p>-w：显示单词数。（单词是指由空格或 tabs 分开的最大字串。）</p>
<p>（wc 等价于 wc -lwc）</p>
</li>
<li><p>alias  别名 <code>alias 简称=&#39;代码&#39;</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$alias</span> <span class="token assign-left variable">ls</span><span class="token operator">=</span><span class="token string">'ls --color=auto'</span> <span class="token comment">#输入 ls 的时候就等同输入 ls --color=auto</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$unalias</span> <span class="token function">cp</span> <span class="token comment">#取消别名</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>id  显示用户 id 以及群组 id</p>
</li>
<li><p>df  (disk free) 显示目前在 Linux 系统 上的文件系统磁盘使用情况统计。</p>
</li>
</ul>
<h5 id="5-基本概念"><a href="#5-基本概念" class="headerlink" title="5.基本概念"></a>5.基本概念</h5><h6 id="（1）目录"><a href="#（1）目录" class="headerlink" title="（1）目录"></a>（1）目录</h6><ul>
<li><p>pwd 当前目录即当前工作目录  (print working directory)</p>
</li>
<li><p>用户主目录：&#x2F;home&#x2F;rainnn   （~）   root用户：&#x2F;root</p>
<blockquote>
<p>cd 回到主目录</p>
</blockquote>
</li>
<li><p>绝对路径：指出从根目录到此文件的路径，一般来说由&#x2F;符号开始。</p>
</li>
<li><p>相对路径：指明从当前目录到此文件的路径</p>
<blockquote>
<p><code>.</code>表示当前目录 <code>..</code>表示当前目录的父目录</p>
</blockquote>
</li>
<li><p>$HOME 主目录</p>
<p><code>echo $HOME</code>查看自己的主目录</p>
</li>
</ul>
<h6 id="（2）链接"><a href="#（2）链接" class="headerlink" title="（2）链接"></a>（2）链接</h6><p>**链接文件:**目录中每一对文件名称和索引节点号称为一个链接(考)</p>
<ul>
<li><p>符号链接（软链接） <strong>可跨文件系统 可以链接目录</strong></p>
<ul>
<li>以路径的形式存在，类似于windows操作系统中的快捷方式</li>
<li>可以对一个不存在的文件名进行链接</li>
<li>如果删除符号链接文件的源文件，符号链接文件将无法找到原有资料。</li>
</ul>
</li>
<li><p>硬链接 <strong>不可跨文件系统</strong></p>
<ul>
<li>以文件副本的形式存在，但不占用实际空间（ln 用于对一个已经存在的文件再创建一个新的链接，而不复制文件的内容。)</li>
<li>原文件名和链接文件名都指向相同的物理位址。 （i-node number）</li>
<li>不允许普通用户给目录创建硬链接</li>
<li>如果删除硬链接文件的源文件，硬链接文件仍然存在，而且保留了原有的内容 </li>
<li>ln 后的链接文件名与物理文件具有相同的权限</li>
</ul>
</li>
<li><p>ln 命令</p>
<ul>
<li><code>ln -s abc linkabc </code>（为abc文件创建<strong>软链接</strong>linkabc，若abc丢失，linkabc会失效）</li>
<li><code>ln abc linkabc</code>（为abc创建<strong>硬链接</strong>linkabc，abc与linkabc各项属性相同）</li>
</ul>
</li>
</ul>
<h5 id="6-权限控制"><a href="#6-权限控制" class="headerlink" title="6.权限控制"></a>6.权限控制</h5><blockquote>
<p>多用户、多任务（此操作系统决定了常常会有多人同时使用这部主机工作），系统必须进行权限控制</p>
<p>确定用户（或者说代表用户执行的程序）对某资源有或无某种操作的权力。</p>
</blockquote>
<h6 id="1-用户类别"><a href="#1-用户类别" class="headerlink" title="(1)用户类别"></a>(1)用户类别</h6><ul>
<li>文件所有者 u</li>
</ul>
<blockquote>
<p>能够设定同组用户和其他用户对该文件的访问权限。一般来说是文件的创建者。</p>
<p>保证每个人的隐私权</p>
</blockquote>
<ul>
<li>同组用户 g</li>
</ul>
<blockquote>
<p>具有相同性质的所有用户,被系统管理员分在同一组。文件所有者或系统管理员可将文件的权限赋予组内的其它用户。</p>
<p>Linux中每个用户至少属于一个用户组，以保证对一个用户组中的所有用户进行集中管理</p>
</blockquote>
<ul>
<li>其他用户 o</li>
</ul>
<blockquote>
<p>文件所有者或系统管理员还可以将文件的访问权赋予系统中所有其它的用户。这样,系统中每一位用户可能都能访问你的某一文件或目录。</p>
</blockquote>
<ul>
<li>所有用户 a</li>
</ul>
<h6 id="（2）三种权限"><a href="#（2）三种权限" class="headerlink" title="（2）三种权限"></a>（2）三种权限</h6><ul>
<li><p>读 r: 4</p>
</li>
<li><p>写 w: 2</p>
</li>
<li><p>执行 x: 1</p>
</li>
<li><p>-: 0</p>
</li>
</ul>
<p><img src="/2022/12/18/Linux/4.png" loading="lazy"></p>
<h6 id="（3）权限判断"><a href="#（3）权限判断" class="headerlink" title="（3）权限判断"></a>（3）权限判断</h6><p><img src="/2022/12/18/Linux/5.jpg" loading="lazy"></p>
<blockquote>
<p>ls -lR 查看目录内一文件的权限 (ls -lR 相当于 ls -l + ls -R  长列表显示文件+目录下文件)</p>
</blockquote>
<ul>
<li>移动：文件所在目录具有w权限（移动文件其实不改变文件，是改变的目录）</li>
<li>在目录下增删文件、子目录(touch rm mkdir rmdir)：要有目录的w权限</li>
<li>用ls列目录：要有目录的r权限</li>
<li>进入目录或将该目录作路径分量时(cd)：要有该文件路径上所有目录的x权限</li>
<li>修改：文件有w权限，文件路径上所有目录有x权限</li>
<li>拷贝：文件有r权限，文件路径上所有目录有x权限</li>
</ul>
<!--若文件在/jobs/work下，则需jobs目录和work目录均具有执行权限-->

<h6 id="（4）权限操作命令"><a href="#（4）权限操作命令" class="headerlink" title="（4）权限操作命令"></a>（4）权限操作命令</h6><ul>
<li><p><strong>chmod</strong></p>
<ul>
<li><p><code>chmod a+r 文件名</code>（给所有用户加r权限）</p>
</li>
<li><p><code>chmod u-r 文件名</code>（给文件所有者减r权限）</p>
</li>
<li><p><code>chmod -R a+r  *</code>（将目录下所有文件与子目录皆设为任何人可读）</p>
<!-- -R意为递归 -->
</li>
<li><p><code>chmod 771 file</code>（与<code>chmod ug=rwx,o=x file</code> 效果相同）</p>
</li>
</ul>
</li>
<li><p>chown 设置文件所有者和文件关联组</p>
<ul>
<li><code>chown [-options] user[：group] filelist</code></li>
</ul>
</li>
<li><p>user表示将要改变的所有者用户名或用户id</p>
</li>
<li><p>group表示将要改变的所属用户组名或组id</p>
<ul>
<li><code>chown test test.txt</code>  把test.txt的所有者改为用户test</li>
</ul>
</li>
<li><p>-R：递归改变目录及其内容的所属用户或用户组</p>
</li>
<li><p><code>chown -R root:test testfloder1</code> 把testfolder1目录及目录下所有文件的所有者改为root，所属用户组名改为test</p>
</li>
<li><p>su + 用户名 切换用户</p>
</li>
<li><p>sudo 以系统管理员的身份执行指令</p>
</li>
</ul>
<h5 id="7-进程管理"><a href="#7-进程管理" class="headerlink" title="7.进程管理"></a>7.进程管理</h5><h6 id="（1）概念"><a href="#（1）概念" class="headerlink" title="（1）概念"></a>（1）概念</h6><ul>
<li>程序是静态的，是保存在磁盘上的可执行代码和数据的集合</li>
<li>进程（进程是程序执行的过程，是执行的程序）是动态的，是Linux系统的基本调度单位</li>
<li>操作系统通过进程来控制对CPU和其他系统资源的访问，并且使用进程来决定在CPU上运行哪个程序、运行多久。</li>
<li>Linux重要特点：可以同时启动多个进程</li>
</ul>
<h6 id="（2）Init进程"><a href="#（2）Init进程" class="headerlink" title="（2）Init进程"></a>（2）Init进程</h6><ul>
<li><p>内核启动后的第一个进程，其PID&#x3D;1</p>
<p>（PID：进程号 一个PID唯一的标识一个进程）</p>
</li>
<li><p><strong>init进程永远不会被终止</strong>，扮演终结父进程的角色，所有进程追溯其祖先最终都会落到init进程身上。如果某个进程在它衍生出来的全部子进程结束之前被终止，此时那些失去了父进程的子进程就都会以init作为它们的父进程。</p>
</li>
</ul>
<h6 id="（3）操作命令"><a href="#（3）操作命令" class="headerlink" title="（3）操作命令"></a>（3）操作命令</h6><ul>
<li><p>ps 显示当前进程的状态</p>
<p>可以用它来确定有哪些进程正在运行以及运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等。<br>它显示的进程列表是一个静态列表，这个列表是在我们启动这个命令时正在运行的进程的快照。</p>
<table>
<thead>
<tr>
<th><strong>USER</strong></th>
<th><strong>PID</strong></th>
<th><strong>%CPU</strong></th>
<th><strong>%MEM</strong></th>
<th><strong>VSZ</strong></th>
<th><strong>RSS</strong></th>
<th><strong>TTY</strong></th>
<th><strong>STAT</strong></th>
<th><strong>START</strong></th>
<th><strong>TIME</strong></th>
<th><strong>COMMAND</strong></th>
</tr>
</thead>
<tbody><tr>
<td>进程所有者</td>
<td>进程号</td>
<td>对cpu的占用率</td>
<td>对内存的占用率</td>
<td>占用的虚拟内存大小</td>
<td>占用的内存大小</td>
<td>进程相关的终端设备</td>
<td>进程状态R：运行S：中断T：停止D：不可中断Z：僵死</td>
<td>进程开始时间</td>
<td>进程使用的总cpu时间</td>
<td>被执行的命令行</td>
</tr>
</tbody></table>
</li>
<li><p>top 动态地持续监听进程地运行状态</p>
<ul>
<li>d 设置刷新进程的时间间隔，你会被提示输入一个数（秒） </li>
<li>q 退出 top 命令。 </li>
<li>k 杀死某进程。你会被提示输入进程 ID 以及要发 送给它的信号。  </li>
<li>h 显示帮助屏幕 </li>
<li>n 显示的进程数量。你会被提示输入数量。 </li>
<li>u 选择用户。 </li>
<li>M 按内存用量排序。</li>
<li>P 按 CPU 用量排序。</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">top</span> <span class="token parameter variable">-n</span> <span class="token number">2</span>
<span class="token comment">#表示更新两次之后终止更新显示</span>
<span class="token function">top</span> <span class="token parameter variable">-d</span> <span class="token number">3</span>
<span class="token comment">#更新周期为 3 秒</span>
<span class="token function">top</span> <span class="token parameter variable">-p</span> <span class="token number">139</span>
<span class="token comment">#显示进程号为 139 的进程信息，CPU、内存占用率等</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>kill 删除执行中的程序或工作  终止和挂起后台进程</p>
</li>
<li><p>pgrep  查找进程的信息,默认只显示PID(通常会和kill命令来连用，在指定条件下kill问题进程)</p>
<p><code>kill PID</code> (PID可通过ps查看）或者<code>kill %jobID</code>  （jobID通过jobs查看）</p>
<ul>
<li>-f 匹配进程名</li>
</ul>
</li>
<li><p>jobs 用于显示和控制后台正在执行的和被挂起的任务序列。</p>
</li>
<li><p><code>fg %jobID</code> 用于将后台运行的或 挂起 的任务（或作业）切换到前台运行</p>
</li>
<li><p><code>bg %jobID</code> 使后台的任务继续运行</p>
</li>
<li><p>nohup   (no hang up)（不挂起），用于在系统后台不挂断地运行命令，退出终端不会影响程序的运行  <code>nohup&#123;command|script&#125;</code> {a|b}:a b中必选一项</p>
</li>
<li><p>前台进程：跟用户交互的</p>
</li>
<li><p>后台进程 ：由后台启动的进程</p>
<p>启动方法：<code>$command &amp;</code>   终止和挂起后台进程：<code>kill</code></p>
</li>
<li><p>dmesg 显示开机信息</p>
</li>
</ul>
<h3 id="三、vi编辑器"><a href="#三、vi编辑器" class="headerlink" title="三、vi编辑器"></a>三、vi编辑器</h3><p>并不是一个排版程序，只是一个文本编辑程序。</p>
<h5 id="1-命令模式-Command-mode"><a href="#1-命令模式-Command-mode" class="headerlink" title="1.命令模式(Command mode)"></a>1.命令模式(Command mode)</h5><h6 id="（1）进入命令模式"><a href="#（1）进入命令模式" class="headerlink" title="（1）进入命令模式"></a>（1）进入命令模式</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$vi</span> +n 文件名
<span class="token comment"># +[n]:</span>
<span class="token comment">#指明进入vi后直接位于文件的第n行</span>
<span class="token comment">#如果只有“+”而不指定n,则光标位于文本的最后一行</span>
<span class="token comment">#如果该文件不存在，会自动建立新文件。</span>
<span class="token variable">$vi</span> <span class="token parameter variable">-R</span> 文件名
<span class="token comment">#以只读方式打开文件</span>
<span class="token variable">$vi</span> <span class="token parameter variable">-r</span> 文件名
<span class="token comment">#恢复系统突然崩溃时正在编辑的文件。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>在任何模式下，按<Esc>键即可回到命令模式</Esc></li>
</ul>
<h6 id="（2）移动光标"><a href="#（2）移动光标" class="headerlink" title="（2）移动光标"></a>（2）移动光标</h6><ul>
<li>最简单的方式是按键盘的上、下、左、右方向键<br> <code>nG</code>	　跳到第n行<br> <code>G</code>		  跳到最后一行<br> <code>0</code>		  跳到行首<br> <code>$</code>		  跳到行尾<br> <code>ctrl+b</code>	  前移一页<br> <code>ctrl+f</code>	  后移一页</li>
</ul>
<h6 id="（3）字符串搜索"><a href="#（3）字符串搜索" class="headerlink" title="（3）字符串搜索"></a>（3）字符串搜索</h6><p><code>/str1</code>      正向搜索字符串 str1<br><code>?str2</code>      反向搜索字符串 str2<br><code>n</code>          继续搜索，找出 str1 字符串下次出现的位置<br><code>N</code>          反方向搜索</p>
<h5 id="2-输入模式-Insert-mode"><a href="#2-输入模式-Insert-mode" class="headerlink" title="2.输入模式(Insert mode)"></a>2.输入模式(Insert mode)</h5><h6 id="（1）进入输入模式"><a href="#（1）进入输入模式" class="headerlink" title="（1）进入输入模式"></a>（1）进入输入模式</h6><p>在命令模式下：</p>
<ul>
<li><i> 在当前光标位置插入</i></li>
<li><a> 光标后一个位置插入</a></li>
<li><o> 光标下一行插入新的行</o></li>
</ul>
<h6 id="2-输入模式下命令"><a href="#2-输入模式下命令" class="headerlink" title="(2)输入模式下命令"></a>(2)输入模式下命令</h6><ul>
<li><p><x> 删除光标所在处单个字符</x></p>
</li>
<li><dd> 删除当前光标所在行</dd></li>
</ul>
<h5 id="3-底行模式-Last-Line-Mode"><a href="#3-底行模式-Last-Line-Mode" class="headerlink" title="3.底行模式(Last Line Mode)"></a>3.底行模式(Last Line Mode)</h5><h6 id="（1）进入底行模式"><a href="#（1）进入底行模式" class="headerlink" title="（1）进入底行模式"></a>（1）进入底行模式</h6><ul>
<li>在命令模式下，按下&lt; : &gt;键</li>
</ul>
<h6 id="（2）移动光标-1"><a href="#（2）移动光标-1" class="headerlink" title="（2）移动光标"></a>（2）移动光标</h6><p><code>:n</code>   将光标移到第n行</p>
<p><code>:+n </code>    将光标移动到当前行往下的第n行</p>
<blockquote>
<p><code>.</code>   – 光标所在行的行号</p>
<p><code>$</code>   – 正文最后一行的行号</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">:.+5 <span class="token comment">#将光标移动到当前行往下的第 5 行。</span>
:345 <span class="token comment">#将光标移到第 345 行</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h6 id="（3）字符串替换"><a href="#（3）字符串替换" class="headerlink" title="（3）字符串替换"></a>（3）字符串替换</h6><p><code>[n1, n2]s/str1/str2/[g][c] </code> 在第 n1 行到 n2 行的范围内将字符串 str1 用 str2 代替</p>
<ul>
<li><p>c 每次替换都由用户确认 </p>
</li>
<li><p>g 对行中搜索字符串的每次出现进行替换。</p>
</li>
<li><p>不加 g 只对行中搜索字符串的首次出现进行替换</p>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">:s/str1/str2/ 	
<span class="token comment">#用字符串 str2 替换该行中首次出现的字符串 str1 </span>
:s/str1/str2/g 
<span class="token comment">#用字符串 str2 替换该行中所有出现的字符串 str1 </span>
:.,<span class="token variable">$s</span>/str1/str2/g 
<span class="token comment">#用字符串 str2 替换正文当前行(.)到末尾($)所有出现的字符串 str1 </span>
:1,<span class="token variable">$s</span>/str1/str2/g
<span class="token comment">#用字符串 str2 替换正文中(第一行到最后一行)所有出现的字符串 str1 </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="（4）-保存"><a href="#（4）-保存" class="headerlink" title="（4） 保存"></a>（4） 保存</h6><ul>
<li>将编辑内容保存到原始文件</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">:w<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>将编辑内容写入file文件</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">:w file<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h6 id="（5）退出"><a href="#（5）退出" class="headerlink" title="（5）退出"></a>（5）退出</h6><ul>
<li>在未作修改的情况下退出</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">：q<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>放弃所有修改，强制退出</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">：q!<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>将编辑的内容写入原始文件并退出编辑程序</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">：wq<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="/2022/12/18/Linux/1.png" loading="lazy"></p>
<h6 id="6-在vi内使用Shell"><a href="#6-在vi内使用Shell" class="headerlink" title="(6)在vi内使用Shell"></a>(6)在vi内使用Shell</h6><p><code>:! command</code></p>
<h5 id="4-Vim和gvim"><a href="#4-Vim和gvim" class="headerlink" title="4.Vim和gvim"></a>4.Vim和gvim</h5><ul>
<li>Vim 代表 Vi IMproved，如同其名称所暗示的那样，Vim 作为标准 UNIX 系统 vi 编辑器的提高版而存在。 Vim 除提供和 vi 编辑器一样强大的功能外，还提供有多级恢复、命令行历史以及命令及文件名补全等功能。 </li>
<li>gvim 是 vi 的 X Window 版本，该版本支持鼠标选中，一些高级的光标移动功能，并且带有菜单和工具按钮。</li>
</ul>
<h3 id="四、shell"><a href="#四、shell" class="headerlink" title="四、shell"></a>四、shell</h3><blockquote>
<p>shell是一个命令行解释器,是内核与用户的接口</p>
<p>也是一种程序设计语言（shell script） </p>
<p>在用户登录后 shell启动</p>
</blockquote>
<h4 id="（一）shell基础"><a href="#（一）shell基础" class="headerlink" title="（一）shell基础"></a>（一）shell基础</h4><h5 id="1-启动指定类型子shell"><a href="#1-启动指定类型子shell" class="headerlink" title="1.启动指定类型子shell"></a>1.启动指定类型子shell</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$shellname</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h5 id="2-退出子shell"><a href="#2-退出子shell" class="headerlink" title="2.退出子shell"></a>2.退出子shell</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$exit</span>
<span class="token operator">&lt;</span>Ctrl+D<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h5 id="3-查看当前系统默认shell"><a href="#3-查看当前系统默认shell" class="headerlink" title="3.查看当前系统默认shell"></a>3.查看当前系统默认shell</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token environment constant">$SHELL</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>输出：&#x2F;bin&#x2F;bash</p>
<h5 id="4-变量"><a href="#4-变量" class="headerlink" title="4.变量"></a>4.变量</h5><blockquote>
<p><strong>变量名</strong>只能是字母、数字、下划线的组合，不能以数字开头</p>
<blockquote>
<p>通常：</p>
<p>大写字母为系统预设的变量</p>
<p>小写字母用于用户自定义的变量</p>
</blockquote>
</blockquote>
<h6 id="（1）赋值"><a href="#（1）赋值" class="headerlink" title="（1）赋值"></a>（1）赋值</h6><ul>
<li>变量名&#x3D; 值 或 {变量名&#x3D; 值} (无空格)</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">abc</span><span class="token operator">=</span><span class="token number">1234</span>  或   <span class="token punctuation">&#123;</span>abc<span class="token operator">=</span><span class="token number">1234</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>若赋空值：</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">abc</span><span class="token operator">=</span><span class="token string">""</span>
<span class="token assign-left variable">abc</span><span class="token operator">=</span>
<span class="token assign-left variable">abc</span><span class="token operator">=</span><span class="token string">''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li>等号两边不能直接接单独的空格符</li>
<li>如果变量所取的值中包含空格，必须使用引号将变量取值括起来</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">'my name'</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">"my name"</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>my<span class="token punctuation">\</span> name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h6 id="（2）显示变量"><a href="#（2）显示变量" class="headerlink" title="（2）显示变量"></a>（2）显示变量</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$echo</span> <span class="token variable">$abc</span> 或  <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;abc&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h6 id="（3）显示所有Shell环境变量"><a href="#（3）显示所有Shell环境变量" class="headerlink" title="（3）显示所有Shell环境变量"></a>（3）显示所有Shell环境变量</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$set</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h6 id="4-清除变量"><a href="#4-清除变量" class="headerlink" title="(4)清除变量"></a>(4)清除变量</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$unset</span> abc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>清除后变量的值为空</p>
<h6 id="5-从标准输入读入变量值read"><a href="#5-从标准输入读入变量值read" class="headerlink" title="(5)从标准输入读入变量值read"></a>(5)从标准输入读入变量值read</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$read</span> var1 var2 var3 
Hello my friends
<span class="token comment">#将var1、var2、var3的值分别设置为Hello、my、friend</span>

<span class="token variable">$read</span> var1 var2 var3 
Hello my dear friends
<span class="token variable">$echo</span> <span class="token variable">$var3</span>
dear friends
<span class="token comment">#若读入的内容个数比变量多，则将多出的都赋给最后一个变量</span>

<span class="token variable">$read</span> var1 var2 var3
Hello friends 
<span class="token variable">$echo</span> <span class="token variable">$var3</span>
$
<span class="token comment">#若变量比读入的内容个数多，则多出的变量将设为空值</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="6-全局环境变量"><a href="#6-全局环境变量" class="headerlink" title="(6)全局环境变量"></a>(6)全局环境变量</h6><blockquote>
<p>传统上，所有全局环境变量均为大写  </p>
<p>可用于所有子进程</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">variable-name<span class="token operator">=</span>value
<span class="token builtin class-name">export</span> variable-name
<span class="token comment">#与本地变量的赋值方式相同。</span>
<span class="token comment">#但赋值后必须将变量值导出，否则无法传递给子进程。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$env</span>
<span class="token comment">#显示所有环境变量</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>Shell 中有一些预留的环境变量名，他们各有其用途，且不能用 作他用，称为嵌入 Shell 变量。 </p>
<ul>
<li><p>HOME 变量： </p>
</li>
<li><p>保存用户主目录的完全路径名</p>
<p> <code>$echo $HOME</code></p>
</li>
<li><p>LOGNAME 变量： </p>
<ul>
<li>保存登陆用户名</li>
</ul>
<p>  <code>$echo $LOGNAME </code></p>
</li>
<li><p>PS1 变量： </p>
<ul>
<li><p>保存主提示符 </p>
</li>
<li><p>基本提示符包含 Shell 提示符，缺省（系统默认状态的 意思）对超级用户为#，其他为$。可以使用任何符号作 提示符</p>
<p><code>$ PS1=“HH-&gt;”</code></p>
</li>
</ul>
</li>
<li><p>PATH 变量： </p>
<ul>
<li>保存进行命令或脚本查找的目录顺序，不同的目录路径 名之间用冒号分隔开。<code>PATH=/bin:usr/bin:/etc:/home/team01/bin:. </code></li>
<li>正确排列这个次序很重要，可以在执行命令时节省时间。</li>
<li>加入新的查找路径： <code>$PATH=$PATH:filelist $export PATH</code></li>
</ul>
</li>
</ul>
<h6 id="（7）特殊字符"><a href="#（7）特殊字符" class="headerlink" title="（7）特殊字符"></a>（7）特殊字符</h6><ul>
<li><p>单引号</p>
<ul>
<li><p>括起来的所有字符都作为普通字符出现</p>
</li>
<li><p>特殊字符用单引号括起来后，也会失去原有意义，而只作为普通字符解释。</p>
</li>
</ul>
</li>
<li><p>双引号</p>
<ul>
<li>由双引号括起来的字符，除（$ \ 引号）几种符号具有其特殊功能外，其余字符都作为普通字符对待</li>
</ul>
</li>
<li><p>反引号</p>
<ul>
<li>反引号括起来的内容被Shell解释为命令行</li>
<li>执行时，Shell首先执行该命令行，并用它的标准输出结果取代整个反引号（包括反引号括起来的部分）</li>
<li>反引号可以与其它引号结合使用。</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">abc</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> The current user is <span class="token punctuation">\</span><span class="token variable">`</span></span>whoami<span class="token punctuation">\</span>``  
<span class="token builtin class-name">echo</span> <span class="token variable">$abc</span>
<span class="token comment">#The current user is test</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>反斜线</p>
<ul>
<li><p>如果下一个字符有特殊含义，反斜线屏蔽其特殊含义。</p>
<p>下述字符包含有特殊意义： &amp; * + ^ $ &#96; “ | ?。</p>
</li>
</ul>
</li>
</ul>
<h6 id="（8）进程间变量的关系"><a href="#（8）进程间变量的关系" class="headerlink" title="（8）进程间变量的关系"></a>（8）进程间变量的关系</h6><ul>
<li><p>变量是进程运行环境的一个组成部分</p>
</li>
<li><p>本地变量在各进程间是不能相互访问和修改的</p>
</li>
<li><p>子进程不会自动地继承父进程中本地的变量</p>
<p>export命令：将变量的设置导出，使之能够传递给子进程</p>
<p>环境变量的值只能传递给子进程，而不能传递给它所在的父进程</p>
</li>
</ul>
<h6 id="9-profile"><a href="#9-profile" class="headerlink" title="(9) profile"></a>(9) profile</h6><p>&#x2F;etc&#x2F;profile：存放系统管理员设置的环境变量</p>
<h5 id="5-注释"><a href="#5-注释" class="headerlink" title="5.注释"></a>5.注释</h5><p>在 Shell 程序中以字符 # 开头的正文行表示注释行。</p>
<h4 id="（二）shell进阶"><a href="#（二）shell进阶" class="headerlink" title="（二）shell进阶"></a>（二）shell进阶</h4><h5 id="1-通配符"><a href="#1-通配符" class="headerlink" title="1.通配符"></a>1.通配符</h5><blockquote>
<p>用户可以在作为命令参数的文件名中包含这些元字符（通配符） 构成一个模式串。</p>
<p>这样就可以按照所要求的模式来匹配文件名、路径名、字符串等。</p>
</blockquote>
<ul>
<li><p>* 通配符     </p>
<ul>
<li><p>匹配文件名中的任何字符串</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$ls</span> .*
<span class="token comment">#列出所有隐含文件</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p>在使用cd命令切换路径时，使用星号还可以省去输入整个路径名的麻烦  </p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$pwd</span>
/home/student
<span class="token variable">$cd</span>  app*
<span class="token variable">$pwd</span>
/home/student/app.1234567<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
</li>
<li><p>? 通配符     </p>
<ul>
<li><p>可以匹配文件名中的任何单个字符</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$ls</span> ??R*
任意两个字符开头，第三个字符是R，后面跟任何字符的文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ul>
</li>
<li><p>[…] 通配符    </p>
<ul>
<li><p>匹配方括号[ ]中指定范围内的字符</p>
<p>可以使用横杠-来连接两个字母或数字，以表示范围</p>
<p>例：<code>[a-z]</code></p>
</li>
<li><p>[!…]</p>
<p>匹配不在指定范围内的任何字符。</p>
<p>例：<code>[!a-z]</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#列出所有以log开头，后面跟任何单个字符，.后面跟随任意一位数字、然后可以是任意字符串的文件名：</span>
<span class="token variable">$ls</span> log?.<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ul>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#列出以 i 或 o 开头的文件名：</span>
<span class="token variable">$ls</span> <span class="token punctuation">[</span>io<span class="token punctuation">]</span>*
<span class="token comment">#列出以 a、b、c、d、m 中任一个字符开头的文件：</span>
<span class="token variable">$ls</span> <span class="token punctuation">[</span>abcdm<span class="token punctuation">]</span>* 或者 <span class="token variable">$ls</span> <span class="token punctuation">[</span>a-dm<span class="token punctuation">]</span>* 
<span class="token comment">#列出所有以 log.开头、后面跟随任意一位数字、然后可以是任意字符串的文件名：</span>
<span class="token variable">$ls</span> log.<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>*
<span class="token comment">#列出所有以大写字母开头的文件名:</span>
<span class="token variable">$ls</span> <span class="token punctuation">[</span>A-Z<span class="token punctuation">]</span>*
<span class="token comment">#以.开头,最后一个字符可以是除 a 和 z 之外的任意字符的文件名:</span>
<span class="token variable">$ls</span> .*<span class="token punctuation">[</span><span class="token operator">!</span>za<span class="token punctuation">]</span> 
<span class="token comment">#列出所有以 LPS 开头、其后可以是任何两个字符，后面跟随一个非数字字符、然后是任意字符串的文件名:</span>
<span class="token variable">$ls</span> LPS？？<span class="token punctuation">[</span>！0－9<span class="token punctuation">]</span>*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="2-标准文件和文件描述符"><a href="#2-标准文件和文件描述符" class="headerlink" title="2.标准文件和文件描述符"></a>2.标准文件和文件描述符</h5><p>在 Shell 中执行命令的时候，每个进程都和三个打开的文件相联系，并使用文件 描述符来引用这些文件。</p>
<h6 id="（1）文件描述符"><a href="#（1）文件描述符" class="headerlink" title="（1）文件描述符"></a>（1）文件描述符</h6><ul>
<li>输入文件 —　标准输入 – stdin    0  缺省是键盘，也可以是文件或其他命令的输出</li>
<li>输出文件 —　标准输出 – stdout    1  缺省是屏幕，也可以是文件</li>
<li>错误输出文件 —标准错误输出 – stderr 2  缺省是屏幕，也可以是文件</li>
</ul>
<h6 id="（2）输入输出重定向"><a href="#（2）输入输出重定向" class="headerlink" title="（2）输入输出重定向"></a>（2）输入输出重定向</h6><blockquote>
<p>若要指定命令的标准输入、输出或错误输出，而不是使用缺省值，就需要使用文件重定向机制。</p>
</blockquote>
<p><code>Command operator file</code>  将输入、输出或错误重定向到某个文件中</p>
<ul>
<li><p>输入重定向 &lt;</p>
</li>
<li><p>输出重定向 &gt;    追加&gt;&gt;</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$ls</span> <span class="token operator">></span> directory.out
<span class="token comment">#将ls的内容写在（输出在）directory.out文件中</span>
<span class="token variable">$cat</span> file1 file2 <span class="token operator">></span> file3
<span class="token comment">#将file1 file2的内容一起写在file3中</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>错误重定向 2&gt;   将命令或程序执行的错误信息放到文件中</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#例：假设已经建立了文件filea，但没有建立文件fileb</span>
<span class="token variable">$cat</span> filea fileb
This is output from filea.
cat: cannot <span class="token function">open</span> fileb
<span class="token comment">#将命令或程序执行的错误信息放到文件中</span>
<span class="token variable">$cat</span> fila fileb <span class="token operator"><span class="token file-descriptor important">2</span>></span> errfile
This is output from filea.
<span class="token variable">$cat</span> errfile
cat: cannot <span class="token function">open</span> fileb

<span class="token comment">#/dev/null是一个特殊的文件，始终为空文件  </span>
<span class="token variable">$cat</span> fila fileb <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null
<span class="token comment">#可以不显示任何错误信息</span>
<span class="token comment">#这个操作等同于把错误输出删除掉，而不输出。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h6 id="3-重定向的结合应用"><a href="#3-重定向的结合应用" class="headerlink" title="(3)重定向的结合应用"></a>(3)重定向的结合应用</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Command <span class="token operator">></span> outfile  <span class="token operator"><span class="token file-descriptor important">2</span>></span> errfile  <span class="token operator">&lt;</span>  infile
<span class="token comment">#以infile为标准输入，将标准输出送到outfile,标准错误输出送到errfile. </span>
Command <span class="token operator">>></span> outfile  <span class="token operator"><span class="token file-descriptor important">2</span>>></span> errfile  <span class="token operator">&lt;</span>  infile
<span class="token comment">#以infile为标准输入，将标准输出追加到outfile,标准错误输出追加到errfile. </span>
Command <span class="token operator">></span> outfile <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span>
<span class="token comment">#&amp;1的含义就可以理解为用标准输出的引用，引用的就是重定向标准输出产生打开的outfile</span>
<span class="token comment">#把标准输出和标准错误输出同时重定向到 outfile</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="3-管道"><a href="#3-管道" class="headerlink" title="3.管道"></a>3.管道</h5><ul>
<li><strong>把一个命令在屏幕上的输出传递给另一个命令作为输入。</strong>用竖杠|表示。（把信息从一端传送到另外一端）</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">命令1 <span class="token operator">|</span>命令2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>例：<code>ls | wc -w</code>  <code>set | more</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$ls</span> 
aa Param set_dir spec_var spec_var2 <span class="token builtin class-name">test</span>
<span class="token variable">$ls</span> <span class="token operator">|</span> <span class="token function">wc</span> –w
<span class="token number">6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="4-过滤和正则表达式"><a href="#4-过滤和正则表达式" class="headerlink" title="4.过滤和正则表达式"></a>4.过滤和正则表达式</h5><blockquote>
<p>当从一个文件或命令输出中抽取或过滤文本时，可以使用正则表达式</p>
<p>以行为单位，来进行字符串的处理行为</p>
</blockquote>
<ul>
<li><code>^d</code>          行首是d的行</li>
<li><code>z$</code>          行尾字符为z</li>
<li><code>.</code>            只匹配任意单字符</li>
<li><code>*</code>            前面的字符重复0到多次  代表任意多个字符</li>
<li><code>[aA]</code> 	 a or A</li>
<li><code>[a-f]</code>	a 到 f</li>
<li><code>[^0-9]</code>  非数字</li>
<li><code>\</code>             屏蔽其后的特殊字符的特殊含义</li>
<li><code>\.</code>           包含字符<code>.</code>的行</li>
<li><code>\&#123;n\&#125; </code>     前导的正则表达式重复n次</li>
<li><code>[0-9]\&#123;3\&#125;</code>  包含3个数字的行</li>
<li><code>\&#123;min,max\&#125;</code>      前导的正则表达式重复min~max次</li>
</ul>
<blockquote>
<p>注意：有些元字符虽然与 Shell 的通配符一样，但意义有所不同</p>
</blockquote>
<h5 id="5-grep命令"><a href="#5-grep命令" class="headerlink" title="5.grep命令"></a>5.grep命令</h5><p><strong>允许对文本文件的内容进行模式查找。</strong>如果找到匹配模式，grep显示包含该模式的所有行。</p>
<p>若指定了多个文件名，结果中会在每一行的前面显示文件名。</p>
<p><code> grep [-option] pattern files</code></p>
<ul>
<li>-c 只输出匹配行的计数。</li>
<li>-n 显示匹配行及行号。</li>
<li>-v 显示不包含匹配文本的所有行。</li>
<li>-w 只显示全字符合的列</li>
</ul>
<p>在grep命令中输入字符串参数时，最好将其用双引号括起来。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#从以phone开头的文件中查找所有含800的行</span>
<span class="token variable">$grep</span> <span class="token string">"800"</span> phone*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>在调用模式匹配时，应使用单引号。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#从phone1文件中找开头不是4和8的行（可以是其他数字或字母、符号等）</span>
<span class="token variable">$grep</span> <span class="token string">'^[^48]'</span> phone1
<span class="token comment">#从phone1文件中找开头为44的行</span>
<span class="token variable">$grep</span> ‘4<span class="token punctuation">\</span><span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">\</span><span class="token punctuation">&#125;</span>’ phone1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>可以与管道一起结合使用</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#显示当前目录下文件名以abc开头同时以123结尾的文件。</span>
<span class="token variable">$ls</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"^abc.*123$"</span>
<span class="token comment">#查看所有类型为“目录”的文件：</span>
<span class="token variable">$ls</span> –l <span class="token operator">|</span> <span class="token function">grep</span> ‘^d’
<span class="token comment">#查看所有类型为“目录”,且组成员及其他用户对其具有执行权限的文件：</span>
<span class="token variable">$ls</span> –l <span class="token operator">|</span> <span class="token function">grep</span> ‘^d<span class="token punctuation">..</span><span class="token punctuation">..</span>.x<span class="token punctuation">..</span>x’

<span class="token comment">#显示匹配 pattern1 或 pattern2 的行</span>
<span class="token variable">$grep</span> pattern1 <span class="token operator">|</span> pattern2 files 
<span class="token comment">#显示既匹配 pattern1 又匹配 pattern2 的行。</span>
<span class="token variable">$grep</span> pattern1 files <span class="token operator">|</span> <span class="token function">grep</span> pattern2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="6-find命令"><a href="#6-find命令" class="headerlink" title="6.find命令"></a>6.find命令</h5><p><code>find path expression [-exec -ok] [command] &#123;&#125; \</code></p>
<ul>
<li><p>path：所查找的目录路径，对目录的搜索是递归的。<br>.表示当前目录     &#x2F;表示系统根目录。</p>
</li>
<li><p>expression项：希望查询的文件的匹配标准或说明</p>
<ul>
<li><p>-name file   寻找名为file的文件，要找的文件名包括在引号中,可以使用通配符。</p>
<p><code>$find . -name &quot;*.txt&quot;</code>  在当前目录及子目录中查找所有的 .txt文件</p>
</li>
<li><p>-user name  按照文件属主来查找文件</p>
<p><code>$find /etc -user uucp </code>  在&#x2F;etc目录下查找文件属主为uucp的文件</p>
</li>
<li><p>-group name 按照文件所属的组来查找文件</p>
</li>
<li><p>-type type  查找某一类型的文件(b、c、d、f、l)</p>
<p>d：目录文件   f：普通文件</p>
</li>
<li><p>-size n[c]  查找文件长度为n块(block)的文件，带有c时表示文件长度以字节计。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#在当前目录下查找文件长度大于1M字节的文件：</span>
<span class="token variable">$find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-size</span> +1000000c
<span class="token comment">#为了在当前目录下查找长度超过10block的文件（1个block等于512字节）：</span>
<span class="token variable">$find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-size</span> +10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>-mtime n  按照文件的更改时间来查找文件</p>
<p><code>-n</code>	        最后的更改时间在n天以内。<br><code>n , +n</code>   更改时间距现在n天以上。</p>
</li>
<li><p>-perm 权限</p>
</li>
</ul>
</li>
<li><p>-exec    find命令对匹配的文件执行该参数所给出的Shell命令command。</p>
</li>
<li><p>-ok     和-exec的作用相同，只是在执行每一个命令之前，都会给出提示，让用户来确定是否执行。如果用户不回应 ‘y’ 或 ‘Y’，command 将不予以执行，并回应 false。</p>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span> <span class="token string">"*.LOG"</span> <span class="token parameter variable">-mtime</span> +5 <span class="token parameter variable">-ok</span> <span class="token function">rm</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token punctuation">\</span>
<span class="token comment">#find命令在当前目录中查找所有文件名以.LOG结尾、更改时间在5日以上的文件，并删除它们。</span>
<span class="token variable">$find</span> <span class="token parameter variable">-name</span> <span class="token string">"*.c"</span> 
<span class="token comment">#将.c 结尾的文件全部找出</span>
<span class="token variable">$find</span> / <span class="token parameter variable">-type</span> f <span class="token parameter variable">-size</span> <span class="token number">0</span> <span class="token parameter variable">-exec</span> <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token punctuation">\</span>
<span class="token comment">#查找系统中所有（/）长度为 0 的普通文件，并列出其完整路径</span>
<span class="token variable">$find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-type</span> f <span class="token parameter variable">-perm</span> <span class="token number">644</span> <span class="token parameter variable">-exec</span> <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token punctuation">\</span>
<span class="token comment">#查找权限为 644 的文件</span>
<span class="token variable">$find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span> <span class="token string">"*.txt"</span> 
<span class="token comment">#想要在当前目录及子目录中查找所有的 .txt 文件</span>
<span class="token variable">$find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span> <span class="token string">"[A-Z]*"</span>
<span class="token comment">#在当前目录及子目录中查找文件名以任一个大写字母开头的文件</span>
<span class="token variable">$find</span> /etc <span class="token parameter variable">-name</span> <span class="token string">"host*"</span>
<span class="token comment">#想要在/etc 目录中查找文件名以 host 开头的文件</span>
<span class="token variable">$find</span> / <span class="token parameter variable">-name</span> <span class="token string">"*"</span>
<span class="token comment">#想要查找根目录下的文件</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="7-sort-命令"><a href="#7-sort-命令" class="headerlink" title="7.sort 命令"></a>7.sort 命令</h5><p>将以默认的方式将文本文件的第一列以 ASCII 码的次序排列，并将结果输出到标准输出。</p>
<h5 id="8-命令组-命令换行"><a href="#8-命令组-命令换行" class="headerlink" title="8. 命令组 命令换行"></a>8. 命令组 命令换行</h5><ul>
<li><p>多个命令在一行输入时，用 “;”作为命令间分隔符。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$ls</span> –R <span class="token operator">></span> outfile <span class="token punctuation">;</span> <span class="token builtin class-name">exit</span>
<span class="token variable">$ls</span> –R <span class="token operator">></span> outfile
<span class="token variable">$exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>可通过加 \ 的方式来进行换行拆分。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$cat</span> /home/mydir/mysubdir/mydata <span class="token punctuation">\</span>
<span class="token operator">></span> /home/yourdir/yourdata<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ul>
<h5 id="9-amp-amp-和"><a href="#9-amp-amp-和" class="headerlink" title="9.&amp;&amp;和||"></a>9.&amp;&amp;和||</h5><ul>
<li><p>命令1 &amp;&amp; 命令2</p>
<p>只有命令1为真(即成功被执行，返回0），命令2才能够被执行</p>
<p><code>$ ls s*  &amp;&amp;  rm s*</code></p>
</li>
<li><p>命令1 || 命令2<br>如果命令1执行失败，那么就执行命令2。</p>
<p><code>$cd /dir1 || echo cannot change to /dir1</code></p>
</li>
<li><p><code>$test expression &amp;&amp; 命令1 || 命令2</code>  若expression为真，则执行命令1，否则执行命令2</p>
</li>
</ul>
<h5 id="10-算术"><a href="#10-算术" class="headerlink" title="10.算术"></a>10.算术</h5><h6 id="（1）shell的算数扩展"><a href="#（1）shell的算数扩展" class="headerlink" title="（1）shell的算数扩展"></a>（1）shell的算数扩展</h6><p><code>$((expression))</code> </p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token variable">$echo</span> <span class="token number">2</span>*<span class="token variable">$i</span>+1
<span class="token variable">$echo</span>  <span class="token variable"><span class="token variable">$((</span><span class="token number">2</span><span class="token operator">*</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
<span class="token comment">#算术扩展中包含的只有变量、运算符和常数  i前没有$符号</span>
<span class="token comment">#表达式内的变量若未定义，则当作其值为0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span> 
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span>i<span class="token operator">==</span><span class="token number">2</span><span class="token variable">))</span></span>  <span class="token comment">#1</span>
<span class="token comment">#算术扩展可以用来判断真假(1为真，0为假)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h6 id="（2）expr命令"><a href="#（2）expr命令" class="headerlink" title="（2）expr命令"></a>（2）expr命令</h6><blockquote>
<p>用于进行整数运算</p>
</blockquote>
<ul>
<li><p>表达式由操作数和运算符组成。操作数一般是整数，也可以是字符串</p>
</li>
<li><p><strong>表达式的各部分(操作数和运算符之间)必须以空格分隔</strong>！！！</p>
</li>
<li><p>表达式中某些对shell有特殊意义的字符必须转义</p>
</li>
</ul>
<p><code>+</code>加法</p>
<p><code>-</code>减法</p>
<p><code>\*</code>乘法</p>
<p><code>/</code>整除</p>
<p><code>%</code>求模(余数)</p>
<p><code>=</code>相等</p>
<ul>
<li><p>可以使用反引号改变计算次序</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$expr</span> <span class="token number">5</span> + <span class="token number">7</span> / <span class="token number">3</span>  <span class="token comment">#7</span>
<span class="token variable">$expr</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">5</span> + <span class="token number">7</span><span class="token variable">`</span></span> / <span class="token number">3</span>  <span class="token comment">#4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<blockquote>
<p>注意，expr 中括号是不可用的。请用&#96;&#96;(反括号)</p>
<p><del><code>expr 3 * (2 + 1) </code></del></p>
<p>bash: syntax error near unexpected token &#96;(‘</p>
</blockquote>
</li>
<li><p>expr命令还可用于字符串测试。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$s1</span><span class="token operator">=</span>“hello”
<span class="token variable">$expr</span>  <span class="token variable">$s1</span> <span class="token operator">=</span> “hello”
<span class="token comment">#1 真</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h5 id="11-test命令"><a href="#11-test命令" class="headerlink" title="11.test命令"></a>11.test命令</h5><blockquote>
<p>用于测试一种或几种条件</p>
</blockquote>
<h6 id="（1）格式"><a href="#（1）格式" class="headerlink" title="（1）格式"></a>（1）格式</h6><ul>
<li>&#96;&#96;&#96;shell<br>test expression<pre class="line-numbers language-none"><code class="language-none">
- &#96;&#96;&#96;shell
  [ expression ]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p>使用方括号时，要注意<strong>在条件两边加上空格</strong>。涉及到变量值（$variable）的比较时最好把变量取值用双引号括起来，以免Shell误解变量值。</p>
<h6 id="（2）输出"><a href="#（2）输出" class="headerlink" title="（2）输出"></a>（2）输出</h6><blockquote>
<p>测试结果反映在退出状态中,而不是直接显示输出</p>
<p><code>$echo $?</code> </p>
</blockquote>
<ul>
<li>条件为真：退出状态为0</li>
<li>条件为假：退出状态非0</li>
</ul>
<h6 id="（3）操作符"><a href="#（3）操作符" class="headerlink" title="（3）操作符"></a>（3）操作符</h6><p>①字符串操作符</p>
<ul>
<li>str1 &#x3D; str2  字符串相等</li>
<li>str1 !&#x3D; str2  字符串不相等</li>
<li>str  字符串非空</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$str1</span><span class="token operator">=</span>abcd 
<span class="token variable">$str2</span><span class="token operator">=</span><span class="token string">"abcd "</span>
<span class="token variable">$test</span> <span class="token string">"<span class="token variable">$str1</span>"</span>
$<span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$str1</span>"</span> <span class="token punctuation">]</span>
<span class="token variable">$echo</span> <span class="token variable">$?</span> <span class="token comment">#测试$str1 是否非空（非空则 0）</span>
<span class="token number">0</span>
<span class="token variable">$test</span> <span class="token string">"<span class="token variable">$str1</span>"</span> <span class="token operator">=</span> <span class="token string">"<span class="token variable">$str2</span>"</span> 
$<span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$str1</span>"</span> <span class="token operator">=</span> <span class="token string">"<span class="token variable">$str2</span>"</span> <span class="token punctuation">]</span>
<span class="token variable">$echo</span> <span class="token variable">$?</span> <span class="token comment">#判断是否相等</span>
<span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>②整数操作符</p>
<ul>
<li>int1 -eq int2    数值相等</li>
<li>int1 -ne int2    数值不等</li>
<li>int1 -lt int2      int1&lt;int2</li>
<li>int1 -gt int2     int1&gt;int2</li>
<li>int1 -le int2     int1&lt;&#x3D;int2</li>
<li>int1 -ge int2    int1&gt;&#x3D;int2</li>
</ul>
<!--当 string 和 int 比较时，看操作符。--> 例：

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$str1</span><span class="token operator">=</span><span class="token number">1234</span>  
<span class="token variable">$str2</span><span class="token operator">=</span>01234  
$<span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$str1</span>"</span> <span class="token operator">=</span> <span class="token string">"<span class="token variable">$str2</span>"</span> <span class="token punctuation">]</span> 
<span class="token variable">$echo</span> <span class="token variable">$?</span> <span class="token comment">#1（字符串比较） 不相等 </span>
$<span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$str1</span>"</span> –eq <span class="token string">"<span class="token variable">$str2</span>"</span> <span class="token punctuation">]</span>  
<span class="token variable">$echo</span> <span class="token variable">$?</span> <span class="token comment">#0（数值比较） 相等</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>③文件操作符：测试文件状态</p>
<ul>
<li>-e file  文件file存在</li>
<li>-d file  文件file是一个目录</li>
<li>-f file  文件file是一个普通文件</li>
<li>-s file  文件file大小不为0</li>
<li>-r file  可读（对文件所有者的权限）</li>
<li>-w file  可写（对文件所有者的权限）</li>
<li>-x file  可执行（对文件所有者的权限）</li>
</ul>
<p>④逻辑操作符：测试多个条件的与或组合</p>
<ul>
<li>-a 逻辑与</li>
<li>-o 逻辑或</li>
<li>! 逻辑非</li>
</ul>
<h4 id="（三）shell脚本"><a href="#（三）shell脚本" class="headerlink" title="（三）shell脚本"></a>（三）shell脚本</h4><h5 id="1-编写方法"><a href="#1-编写方法" class="headerlink" title="1.编写方法"></a>1.编写方法</h5><h6 id="（1）创建文件"><a href="#（1）创建文件" class="headerlink" title="（1）创建文件"></a>（1）创建文件</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">touch</span> test<span class="token punctuation">(</span>文件名<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h6 id="（2）编辑内容"><a href="#（2）编辑内容" class="headerlink" title="（2）编辑内容"></a>（2）编辑内容</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> test（文件名） //进入vi编辑编辑器
<span class="token comment">#！/bin/bash //告诉系统用什么解释器来执行该脚本，用哪一种shell</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h6 id="（3）运行shell脚本"><a href="#（3）运行shell脚本" class="headerlink" title="（3）运行shell脚本"></a>（3）运行shell脚本</h6><ul>
<li><p><code>bash</code>   或  <code>.</code> </p>
</li>
<li><p><strong>用户对该文件具有x和r权限</strong></p>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#bash  这种运行方式是启动了一个子Shell（在后台执行）</span>
<span class="token variable">$cat</span> set_dir
<span class="token assign-left variable">dir1</span><span class="token operator">=</span>/tmpf
<span class="token assign-left variable">dir2</span><span class="token operator">=</span>/usr
<span class="token builtin class-name">echo</span> <span class="token variable">$dir1</span>  <span class="token variable">$dir2</span>
<span class="token variable">$bash</span> set_dir
/tmp  /usr
<span class="token variable">$echo</span> <span class="token variable">$dir1</span> <span class="token variable">$dir2</span>
空行
<span class="token comment"># .  </span>
<span class="token variable">$cat</span> set_dir
<span class="token assign-left variable">dir1</span><span class="token operator">=</span>/tmp
<span class="token assign-left variable">dir2</span><span class="token operator">=</span>/usr
<span class="token builtin class-name">echo</span> <span class="token variable">$dir1</span>    <span class="token variable">$dir2</span>
$. set_dir
/tmp  /usr
<span class="token variable">$echo</span> <span class="token variable">$dir1</span>
/tmp  
<span class="token variable">$echo</span> <span class="token variable">$dir2</span>
/usr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="2-流程控制"><a href="#2-流程控制" class="headerlink" title="2.流程控制"></a>2.流程控制</h5><h6 id="（1）IF"><a href="#（1）IF" class="headerlink" title="（1）IF"></a>（1）IF</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">..</span>.
<span class="token keyword">then</span> 
	<span class="token punctuation">..</span>.
<span class="token keyword">else</span>
	<span class="token punctuation">..</span>.
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">..</span>.
<span class="token keyword">then</span>
	<span class="token punctuation">..</span>.
elif<span class="token punctuation">..</span>.
<span class="token keyword">then</span>
	<span class="token punctuation">..</span>.
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="（2）case"><a href="#（2）case" class="headerlink" title="（2）case"></a>（2）case</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">case</span> 值 <span class="token keyword">in</span>
匹配值1<span class="token punctuation">)</span>
	<span class="token punctuation">..</span>.
	<span class="token punctuation">;</span><span class="token punctuation">;</span>
匹配值2<span class="token punctuation">)</span>
	<span class="token punctuation">..</span>.
	<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="（3）for"><a href="#（3）for" class="headerlink" title="（3）for"></a>（3）for</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">for</span> 变量 <span class="token keyword">in</span> item1 item2 item3 <span class="token punctuation">..</span>. itemN
<span class="token keyword">do</span>
	<span class="token punctuation">..</span>.
	<span class="token punctuation">..</span>.
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">sta</span> <span class="token keyword">in</span> Alabama Alaska Arizona California
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span>  The next state is <span class="token variable">$sta</span>
<span class="token keyword">done</span> 

The next state is Alabama
The next state is Alaska
The next state is Arizona
The next state is California<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>也支持java类似的循环方式</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token keyword">do</span>
	<span class="token punctuation">..</span>.
	<span class="token punctuation">..</span>.
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="（4）while"><a href="#（4）while" class="headerlink" title="（4）while"></a>（4）while</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">while</span> condition
<span class="token keyword">do</span>
	<span class="token punctuation">..</span>.
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="（5）until"><a href="#（5）until" class="headerlink" title="（5）until"></a>（5）until</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">until</span> condition
<span class="token keyword">do</span>
    <span class="token punctuation">..</span>.
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>如果条件不成立，则进入循环，执行循环体中语句直到条件成立，结束循环</p>
<h5 id="3-执行时传递参数"><a href="#3-执行时传递参数" class="headerlink" title="3.执行时传递参数"></a>3.执行时传递参数</h5><p>（1）位置变量参数</p>
<ul>
<li><p>$0 执行的文件名（包含文件路径） （指命令对应的可执行名）</p>
</li>
<li><p>$1 第一个参数  $2 第二个参数  $3 第三个参数 …</p>
<p>其中 1-9 是真正的参数名（变量名）,“$”符只是用来标识变量的替换。 第九个以后的参数都不会被访问。</p>
</li>
</ul>
<p>（2）特定变量参数</p>
<ul>
<li>$# 传递到脚本的参数个数</li>
<li>$$   脚本运行的当前shell的PID</li>
<li>$?   最后一个程序或命令的执行状态，用数字表示：0表示执行没有错误，其他任何值表明有错误。（保存最后程序的退出状态值，检验退出状态命令  <code>$echo $?</code> ）</li>
<li>$* 传递的参数作为一个字符串显示</li>
<li>$@</li>
</ul>
<p>$*和$@区别：</p>
<blockquote>
<p>只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，则 “ * “ 等价于 “1 2 3”（传递了一个参数），而 “@” 等价于 “1” “2” “3”（传递了三个参数）。</p>
</blockquote>
<p>传参方法：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">bash</span> <span class="token builtin class-name">test</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="/2022/12/18/Linux/Files\Study\Linux\Linux\6.png" alt="image-20230216154411270" loading="lazy"></p>
<h5 id="4-读入参数"><a href="#4-读入参数" class="headerlink" title="4.读入参数"></a>4.读入参数</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">read</span> i<span class="token punctuation">(</span>变量名<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h5 id="5-sleep"><a href="#5-sleep" class="headerlink" title="5.sleep"></a>5.sleep</h5><blockquote>
<p>将目前动作延迟一段时间。</p>
</blockquote>
<p><code>sleep 60s</code>  停60s</p>
<p><code>sleep 5m</code> 停5min</p>
<p>s 为秒，m 为 分钟，h 为小时，d 为日数</p>
<h3 id="五、例题"><a href="#五、例题" class="headerlink" title="五、例题"></a>五、例题</h3><h4 id="（一）shell编程"><a href="#（一）shell编程" class="headerlink" title="（一）shell编程"></a>（一）shell编程</h4><h5 id="1-计算两个正整数的最大公约数"><a href="#1-计算两个正整数的最大公约数" class="headerlink" title="1.计算两个正整数的最大公约数"></a>1.计算两个正整数的最大公约数</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> num1
<span class="token builtin class-name">read</span> num2
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$num1</span> <span class="token parameter variable">-ne</span> <span class="token variable">$num2</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span> 
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$num1</span> <span class="token parameter variable">-gt</span> <span class="token variable">$num2</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
<span class="token assign-left variable">num1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>num1 <span class="token operator">-</span> num2<span class="token variable">))</span></span> 
<span class="token keyword">else</span>
<span class="token assign-left variable">num2</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>num2 <span class="token operator">-</span> num1<span class="token variable">))</span></span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$num1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="2-给出输入的一系列整数（输入0停止输入）的最大数、第二最大数"><a href="#2-给出输入的一系列整数（输入0停止输入）的最大数、第二最大数" class="headerlink" title="2.给出输入的一系列整数（输入0停止输入）的最大数、第二最大数"></a>2.给出输入的一系列整数（输入0停止输入）的最大数、第二最大数</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> n
<span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token variable">$n</span>
<span class="token assign-left variable">sMax</span><span class="token operator">=</span><span class="token variable">$n</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$n</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
<span class="token builtin class-name">read</span> n
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$n</span> <span class="token parameter variable">-gt</span> <span class="token variable">$max</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
<span class="token assign-left variable">sMax</span><span class="token operator">=</span><span class="token variable">$max</span>
<span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token variable">$n</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$n</span> <span class="token parameter variable">-gt</span> <span class="token variable">$sMax</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
<span class="token assign-left variable">sMax</span><span class="token operator">=</span><span class="token variable">$n</span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$max</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sMax</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="3-写一个shell脚本，每隔10秒，检查当前系统中有没有进程名字为“firefox”的进程，如果有的话显示“firefox-进程出现了！”并退出，返回码设置为等待的秒数。"><a href="#3-写一个shell脚本，每隔10秒，检查当前系统中有没有进程名字为“firefox”的进程，如果有的话显示“firefox-进程出现了！”并退出，返回码设置为等待的秒数。" class="headerlink" title="3.写一个shell脚本，每隔10秒，检查当前系统中有没有进程名字为“firefox”的进程，如果有的话显示“firefox 进程出现了！”并退出，返回码设置为等待的秒数。"></a>3.写一个shell脚本，每隔10秒，检查当前系统中有没有进程名字为“firefox”的进程，如果有的话显示“firefox 进程出现了！”并退出，返回码设置为等待的秒数。</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">while</span> <span class="token boolean">true</span>
<span class="token keyword">do</span>
process <span class="token operator">=</span> <span class="token variable"><span class="token variable">`</span>pgrep <span class="token parameter variable">-f</span> firefox<span class="token variable">`</span></span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$&#123;<span class="token operator">#</span>process&#125;</span> <span class="token parameter variable">-gt</span> <span class="token number">0</span> <span class="token punctuation">]</span>
	<span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> “firefox进程出现了！”
		<span class="token builtin class-name">echo</span> “等待时间为：<span class="token variable">$i</span>”
		<span class="token builtin class-name">break</span>
	<span class="token keyword">else</span>
		i <span class="token operator">=</span> i+10
		<span class="token function">sleep</span> <span class="token number">10</span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="4-写一个脚本，持续监视用户stu是否登录，如果登录了，就每隔1分钟把你的用户名和QQ号码发给他，重复发送3次为止。"><a href="#4-写一个脚本，持续监视用户stu是否登录，如果登录了，就每隔1分钟把你的用户名和QQ号码发给他，重复发送3次为止。" class="headerlink" title="4.写一个脚本，持续监视用户stu是否登录，如果登录了，就每隔1分钟把你的用户名和QQ号码发给他，重复发送3次为止。"></a>4.写一个脚本，持续监视用户stu是否登录，如果登录了，就每隔1分钟把你的用户名和QQ号码发给他，重复发送3次为止。</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">while</span> <span class="token boolean">true</span>
<span class="token keyword">do</span>
	<span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">who</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-w</span> “stu”<span class="token variable">`</span></span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$&#123;<span class="token operator">#</span>user&#125;</span> <span class="token parameter variable">-gt</span> <span class="token number">0</span> <span class="token punctuation">]</span>
	<span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> “please enter message and press ctrl + D”
		<span class="token function">write</span> stu
		<span class="token function">sleep</span> <span class="token number">60</span>
		<span class="token builtin class-name">echo</span> “please enter message and press ctrl + D”
		<span class="token function">write</span> stu
		<span class="token function">sleep</span> <span class="token number">60</span>
		<span class="token builtin class-name">echo</span> “please enter message and press ctrl + D”
		<span class="token function">write</span> stu
		<span class="token function">sleep</span> <span class="token number">60</span>
		<span class="token builtin class-name">break</span>
	<span class="token keyword">fi</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">until</span> <span class="token function">who</span> <span class="token operator">|</span> <span class="token function">grep</span> “<span class="token variable">$1</span>” <span class="token operator">></span> /dev/null
<span class="token keyword">do</span>
	<span class="token function">sleep</span> <span class="token number">60</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> “*****<span class="token variable">$1</span> has just logged in****”
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



</div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="寄付" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></span><div id="reward-comment">I'm so cute. Do you want to feed me?</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://github.com/rainnn-w/Pictures/blob/main/%E6%94%AF%E4%BB%98%E5%AE%9D.jpg"><img loading="lazy" src="https://github.com/rainnn-w/Pictures/blob/main/%E6%94%AF%E4%BB%98%E5%AE%9D.jpg" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><span class="icon iconify" data-icon="ri:alipay-line"></span></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://github.com/rainnn-w/Pictures/blob/main/%E5%BE%AE%E4%BF%A1.jpg"><img loading="lazy" src="https://github.com/rainnn-w/Pictures/blob/main/%E5%BE%AE%E4%BF%A1.jpg" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><span class="icon iconify" data-icon="ri:wechat-pay-line"></span></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>著者：</strong>Rainnn-W</li><li class="post-copyright-link"><strong>記事へのリンク：</strong><a href="https://rainnn-w.github.io/2022/12/18/" title="Linux">https://rainnn-w.github.io/2022/12/18/</a></li><li class="post-copyright-license"><strong>著作権表示：</strong>このブログ内のすべての記事は、特別な記載がない限り <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> の下のライセンスで保護されています。</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/12/22/" rel="prev" title="使用Hexo+Github搭建个人博客"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">使用Hexo+Github搭建个人博客</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/12/11/" rel="next" title="Hello World"><span class="post-nav-text">Hello World</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2023 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> Rainnn-W</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v6.3.0</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.10.9</span></div><div class="live-time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2022-12-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} 天 ${passHour} 小时 ${passMinute} 分 ${passSecond} 秒`;
}
blog_live_time();
</script></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>